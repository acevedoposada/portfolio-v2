@use "mixins/border" as b;
@use "mixins/transition" as t;

.form-field {
  @apply flex h-12 rounded-full ring-2 ring-transparent outline-none;
  @include b.border(all);
  @include t.transition(all);

  &:focus-within:not(&--error, &--disabled) {
    @apply outline-none ring-indigo-500/50 border-indigo-500/70;

    &>* {
      @apply border-indigo-500/70;
    }
  }

  &__container {
    @apply flex flex-col gap-2;
  }

  &__label {
    @apply font-bold text-sm text-indigo-200 leading-none;
  }

  &__help-text {
    @apply font-medium text-sm text-white/80 leading-none font-lora;

    &--error {
      @apply text-red-500;
    }
  }

  &__prefix,
  &__suffix,
  &__btn {
    @apply px-4 leading-none grid place-items-center bg-indigo-900/40 backdrop-blur-xl shadow-lg shadow-indigo-800/15;
  }

  &__suffix,
  &__btn {
    @include b.border(left);
    @apply rounded-r-full;

    &:has(~ *) {
      @apply rounded-none;
    }
  }

  &__suffix,
  &__prefix {
    @apply font-medium;
  }

  &__prefix {
    @include b.border(right);
    @apply rounded-l-full pl-5;
  }

  &__btn {
    @apply relative pr-6 hover:bg-transparent overflow-hidden [&:not([disabled])]:hover:after:opacity-100 [&:not([disabled])]:active:[&>span]:scale-95;
    @include t.transition(all);

    &>span {
      @apply flex gap-2 whitespace-nowrap items-center leading-none;
      @include t.transition(transform, 150ms);
    }

    &:has(svg, i.ti) {
      @apply pr-4;
    }

    &:not([disabled])::after {
      content: "";
      @apply opacity-0 bg-gradient-to-tr from-indigo-500/20 to-purple-500/20 absolute w-full h-full top-0 left-0 z-[-1];
      @include t.transition(all);
    }

    &__icon {
      @apply opacity-80 w-5 h-5;

      &:is(i) {
        @apply text-xl leading-none;
      }
    }
  }

  &:has(input[disabled]) {

    @apply bg-zinc-400/5;

    .form-field__prefix,
    .form-field__suffix,
    .form-field__btn {
      @apply bg-zinc-800/30 select-none shadow-none text-white/50;
    }
  }

  &__input {
    @apply flex flex-1 bg-transparent rounded-[inherit] relative;

    &:has(&__icon) &__field {
      @apply pl-12;
    }

    &:has(&__icon--right) &__field {
      @apply pl-4 pr-12;
    }

    &__icon {
      @apply absolute aspect-square h-full grid place-content-center select-none pointer-events-none;

      &:is(i) {
        @apply text-xl leading-none;
      }

      &--right {
        @apply right-0;
      }
    }

    &__field {
      @apply flex-1 bg-transparent rounded-[inherit] px-4 focus:outline-none;
    }
  }

  &--error {
    @apply ring-red-500/50 border-red-500/70;

    &>* {
      @apply border-red-500/70;
    }
  }

  &--disabled {
    @apply ring-0 border-zinc-400 select-none;
  }
}