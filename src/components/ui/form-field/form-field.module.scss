@use "mixins/border" as b;
@use "mixins/transition" as t;

.form-field {
  @apply flex h-12 rounded-full outline-none ring-2 ring-transparent;
  @include b.border(all);
  @include t.transition(all);

  &:focus-within:not(&--error, &--disabled) {
    @apply border-indigo-500/70 outline-none ring-indigo-500/50;

    & > * {
      @apply border-indigo-500/70;
    }
  }

  &__container {
    @apply flex flex-col gap-2;
  }

  &__label {
    @apply text-sm font-bold leading-none text-indigo-200;
  }

  &__help-text {
    @apply font-lora text-sm font-medium leading-none text-white/80;

    &--error {
      @apply text-red-500;
    }
  }

  &__prefix,
  &__suffix,
  &__btn {
    @apply grid place-items-center bg-indigo-900/40 px-4 leading-none shadow-lg shadow-indigo-800/15 backdrop-blur-xl;
  }

  &__suffix,
  &__btn {
    @include b.border(left);
    @apply rounded-r-full;

    &:has(~ *) {
      @apply rounded-none;
    }
  }

  &__suffix,
  &__prefix {
    @apply font-medium;
  }

  &__prefix {
    @include b.border(right);
    @apply rounded-l-full pl-5;
  }

  &__btn {
    @apply relative overflow-hidden pr-6 hover:bg-transparent [&:not([disabled])]:hover:after:opacity-100 [&:not([disabled])]:active:[&>span]:scale-95;
    @include t.transition(all);

    & > span {
      @apply flex items-center gap-2 whitespace-nowrap leading-none;
      @include t.transition(transform, 150ms);
    }

    &:has(svg, i.ti) {
      @apply pr-4;
    }

    &:not([disabled])::after {
      content: "";
      @apply absolute left-0 top-0 z-[-1] h-full w-full bg-gradient-to-tr from-indigo-500/20 to-purple-500/20 opacity-0;
      @include t.transition(all);
    }

    &__icon {
      @apply h-5 w-5 opacity-80;

      &:is(i) {
        @apply text-xl leading-none;
      }
    }
  }

  &:has(input[disabled]) {
    @apply bg-zinc-400/5;

    .form-field__prefix,
    .form-field__suffix,
    .form-field__btn {
      @apply select-none bg-zinc-800/30 text-white/50 shadow-none;
    }
  }

  &__input {
    @apply relative flex flex-1 rounded-[inherit] bg-transparent;

    &:has(&__icon) &__field {
      @apply pl-12;
    }

    &:has(&__icon--right) &__field {
      @apply pl-4 pr-12;
    }

    &__icon {
      @apply pointer-events-none absolute grid aspect-square h-full select-none place-content-center;

      &:is(i) {
        @apply text-xl leading-none;
      }

      &--right {
        @apply right-0;
      }
    }

    &__field {
      @apply flex-1 rounded-[inherit] bg-transparent px-4 focus:outline-none;
    }
  }

  &--error {
    @apply border-red-500/70 ring-red-500/50;

    & > * {
      @apply border-red-500/70;
    }
  }

  &--disabled {
    @apply select-none border-zinc-400 ring-0;
  }
}
